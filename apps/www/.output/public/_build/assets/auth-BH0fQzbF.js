import{r as B}from"./client-DSsj00kt.js";let v=[],T=0;const $=4;let I=e=>{let t=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=t.push(n),()=>{for(let o=T+$;o<v.length;)v[o]===n?v.splice(o,$):o+=$;let s=t.indexOf(n);~s&&(t.splice(s,1),--r.lc||r.off())}},notify(n,s){let o=!v.length;for(let i of t)v.push(i,r.value,n,s);if(o){for(T=0;T<v.length;T+=$)v[T](v[T+1],v[T+2],v[T+3]);v.length=0}},off(){},set(n){let s=r.value;s!==n&&(r.value=n,r.notify(s))},subscribe(n){let s=r.listen(n);return n(r.value),s},value:e};return r};const fe=5,j=6,k=10;let de=(e,t,r,n)=>(e.events=e.events||{},e.events[r+k]||(e.events[r+k]=n(s=>{e.events[r].reduceRight((o,i)=>(i(o),o),{shared:{},...s})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let s=e.events[r],o=s.indexOf(t);s.splice(o,1),s.length||(delete e.events[r],e.events[r+k](),delete e.events[r+k])}),he=1e3,pe=(e,t)=>de(e,n=>{let s=t(n);s&&e.events[j].push(s)},fe,n=>{let s=e.listen;e.listen=(...i)=>(!e.lc&&!e.active&&(e.active=!0,n()),s(...i));let o=e.off;return e.events[j]=[],e.off=()=>{o(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let i of e.events[j])i();e.events[j]=[]}},he)},()=>{e.listen=s,e.off=o}});function ge(e,t,r){let n=new Set(t).add(void 0);return e.listen((s,o,i)=>{n.has(i)&&r(s,o,i)})}var me=Object.defineProperty,ye=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))we.call(t,r)&&X(e,r,t[r]);if(Q)for(var r of Q(t))_e.call(t,r)&&X(e,r,t[r]);return e},b=(e,t)=>ye(e,ve(t)),be=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},Re=async(e,t)=>{var r,n,s,o,i,u;let c=t||{};const a={onRequest:[t?.onRequest],onResponse:[t?.onResponse],onSuccess:[t?.onSuccess],onError:[t?.onError],onRetry:[t?.onRetry]};if(!t||!t?.plugins)return{url:e,options:c,hooks:a};for(const l of t?.plugins||[]){if(l.init){const f=await((r=l.init)==null?void 0:r.call(l,e.toString(),t));c=f.options||c,e=f.url}a.onRequest.push((n=l.hooks)==null?void 0:n.onRequest),a.onResponse.push((s=l.hooks)==null?void 0:s.onResponse),a.onSuccess.push((o=l.hooks)==null?void 0:o.onSuccess),a.onError.push((i=l.hooks)==null?void 0:i.onError),a.onRetry.push((u=l.hooks)==null?void 0:u.onRetry)}return{url:e,options:c,hooks:a}},Y=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},Oe=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}};function Te(e){if(typeof e=="number")return new Y({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new Y(e);case"exponential":return new Oe(e);default:throw new Error("Invalid retry strategy")}}var Se=async e=>{const t={},r=async n=>typeof n=="function"?await n():n;if(e?.auth){if(e.auth.type==="Bearer"){const n=await r(e.auth.token);if(!n)return t;t.authorization=`Bearer ${n}`}else if(e.auth.type==="Basic"){const n=r(e.auth.username),s=r(e.auth.password);if(!n||!s)return t;t.authorization=`Basic ${btoa(`${n}:${s}`)}`}else if(e.auth.type==="Custom"){const n=r(e.auth.value);if(!n)return t;t.authorization=`${r(e.auth.prefix)} ${n}`}}return t},Pe=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Ee(e){const t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";const n=t.split(";").shift()||"";return Pe.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}function Ae(e){try{return JSON.parse(e),!0}catch{return!1}}function te(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}function Z(e){try{return JSON.parse(e)}catch{return e}}function K(e){return typeof e=="function"}function Ue(e){if(e?.customFetchImpl)return e.customFetchImpl;if(typeof globalThis<"u"&&K(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&K(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function Ie(e){const t=new Headers(e?.headers),r=await Se(e);for(const[n,s]of Object.entries(r||{}))t.set(n,s);if(!t.has("content-type")){const n=Le(e?.body);n&&t.set("content-type",n)}return t}function Le(e){return te(e)?"application/json":null}function Ne(e){if(!e?.body)return null;const t=new Headers(e?.headers);if(te(e.body)&&!t.has("content-type")){for(const[r,n]of Object.entries(e?.body))n instanceof Date&&(e.body[r]=n.toISOString());return JSON.stringify(e.body)}return e.body}function xe(e,t){var r;if(t?.method)return t.method.toUpperCase();if(e.startsWith("@")){const n=(r=e.split("@")[1])==null?void 0:r.split("/")[0];return ne.includes(n)?n.toUpperCase():t?.body?"POST":"GET"}return t?.body?"POST":"GET"}function $e(e,t){let r;return!e?.signal&&e?.timeout&&(r=setTimeout(()=>t?.abort(),e?.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}var je=class re extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,re.prototype)}};async function z(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new je(r.issues);return r.value}var ne=["get","post","put","patch","delete"],ke=e=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(t,r){var n,s,o,i;const u=((s=(n=e.plugins)==null?void 0:n.find(c=>{var a;return(a=c.schema)!=null&&a.config?t.startsWith(c.schema.config.baseURL||"")||t.startsWith(c.schema.config.prefix||""):!1}))==null?void 0:s.schema)||e.schema;if(u){let c=t;(o=u.config)!=null&&o.prefix&&c.startsWith(u.config.prefix)&&(c=c.replace(u.config.prefix,""),u.config.baseURL&&(t=t.replace(u.config.prefix,u.config.baseURL))),(i=u.config)!=null&&i.baseURL&&c.startsWith(u.config.baseURL)&&(c=c.replace(u.config.baseURL,""));const a=u.schema[c];if(a){let l=b(w({},r),{method:a.method,output:a.output});return r?.disableValidation||(l=b(w({},l),{body:a.input?await z(a.input,r?.body):r?.body,params:a.params?await z(a.params,r?.params):r?.params,query:a.query?await z(a.query,r?.query):r?.query})),{url:t,options:l}}}return{url:t,options:r}}}),qe=e=>{async function t(r,n){const s=b(w(w({},e),n),{plugins:[...e?.plugins||[],ke(e||{})]});if(e?.catchAllError)try{return await V(r,s)}catch(o){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:o}}}return await V(r,s)}return t};function ze(e,t){let{baseURL:r,params:n,query:s}=t||{query:{},params:{},baseURL:""},o=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){const f=e.toString().split("@")[1].split("/")[0];ne.includes(f)&&(e=e.replace(`@${f}/`,"/"))}o.endsWith("/")||(o+="/");let[i,u]=e.replace(o,"").split("?");const c=new URLSearchParams(u);for(const[f,h]of Object.entries(s||{}))h!=null&&c.set(f,String(h));if(n)if(Array.isArray(n)){const f=i.split("/").filter(h=>h.startsWith(":"));for(const[h,d]of f.entries()){const _=n[h];i=i.replace(d,_)}}else for(const[f,h]of Object.entries(n))i=i.replace(`:${f}`,String(h));i=i.split("/").map(encodeURIComponent).join("/"),i.startsWith("/")&&(i=i.slice(1));let a=c.toString();return a=a.length>0?`?${a}`.replace(/\+/g,"%20"):"",o.startsWith("http")?new URL(`${i}${a}`,o):`${o}${i}${a}`}var V=async(e,t)=>{var r,n,s,o,i,u,c,a;const{hooks:l,url:f,options:h}=await Re(e,t),d=Ue(h),_=new AbortController,L=(r=h.signal)!=null?r:_.signal,P=ze(f,h),N=Ne(h),A=await Ie(h),E=xe(f,h);let g=b(w({},h),{url:P,headers:A,body:N,method:E,signal:L});for(const y of l.onRequest)if(y){const m=await y(g);m instanceof Object&&(g=m)}("pipeTo"in g&&typeof g.pipeTo=="function"||typeof((n=t?.body)==null?void 0:n.pipe)=="function")&&("duplex"in g||(g.duplex="half"));const{clearTimeout:D}=$e(h,_);let p=await d(g.url,g);D();const J={response:p,request:g};for(const y of l.onResponse)if(y){const m=await y(b(w({},J),{response:(s=t?.hookOptions)!=null&&s.cloneResponse?p.clone():p}));m instanceof Response?p=m:m instanceof Object&&(p=m.response)}if(p.ok){if(!(g.method!=="HEAD"))return{data:"",error:null};const m=Ee(p),R={data:"",response:p,request:g};if(m==="json"||m==="text"){const O=await p.text(),le=await((o=g.jsonParser)!=null?o:Z)(O);R.data=le}else R.data=await p[m]();g?.output&&g.output&&!g.disableValidation&&(R.data=await z(g.output,R.data));for(const O of l.onSuccess)O&&await O(b(w({},R),{response:(i=t?.hookOptions)!=null&&i.cloneResponse?p.clone():p}));return t?.throw?R.data:{data:R.data,error:null}}const ce=(u=t?.jsonParser)!=null?u:Z,x=await p.text(),G=Ae(x),M=G?await ce(x):null,ue={response:p,responseText:x,request:g,error:b(w({},M),{status:p.status,statusText:p.statusText})};for(const y of l.onError)y&&await y(b(w({},ue),{response:(c=t?.hookOptions)!=null&&c.cloneResponse?p.clone():p}));if(t?.retry){const y=Te(t.retry),m=(a=t.retryAttempt)!=null?a:0;if(await y.shouldAttemptRetry(m,p)){for(const O of l.onRetry)O&&await O(J);const R=y.getDelay(m);return await new Promise(O=>setTimeout(O,R)),await V(e,b(w({},t),{retryAttempt:m+1}))}}if(t?.throw)throw new be(p.status,p.statusText,G?M:x);return{data:null,error:b(w({},M),{status:p.status,statusText:p.statusText})}},Ce={},Fe={};const C=Object.create(null),U=e=>Ce||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?C:globalThis),S=new Proxy(C,{get(e,t){return U()[t]??C[t]},has(e,t){const r=U();return t in r||t in C},set(e,t,r){const n=U(!0);return n[t]=r,!0},deleteProperty(e,t){if(!t)return!1;const r=U(!0);return delete r[t],!0},ownKeys(){const e=U(!0);return Object.keys(e)}});function De(e){return e?e!=="false":!1}const Me=typeof process<"u"&&Fe&&"production"||"";Me==="test"||De(S.TEST);const F=(e,t,r,n)=>{const s=I({data:null,error:null,isPending:!0,isRefetching:!1,refetch:()=>o()}),o=()=>{const u=typeof n=="function"?n({data:s.get().data,error:s.get().error,isPending:s.get().isPending}):n;return r(t,{...u,async onSuccess(c){typeof window<"u"&&s.set({data:c.data,error:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await u?.onSuccess?.(c)},async onError(c){const{request:a}=c,l=typeof a.retry=="number"?a.retry:a.retry?.attempts,f=a.retryAttempt||0;l&&f<l||(s.set({error:c.error,data:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await u?.onError?.(c))},async onRequest(c){const a=s.get();s.set({isPending:a.data===null,data:a.data,error:null,isRefetching:!0,refetch:s.value.refetch}),await u?.onRequest?.(c)}})};e=Array.isArray(e)?e:[e];let i=!1;for(const u of e)u.subscribe(()=>{i?o():pe(s,()=>(o(),i=!0,()=>{s.off(),u.off()}))});return s};class se extends Error{constructor(t,r){super(t),this.name="BetterAuthError",this.message=t,this.cause=r,this.stack=""}}function Be(e){return{authorize(t,r="AND"){let n=!1;for(const[s,o]of Object.entries(t)){const i=e[s];if(!i)return{success:!1,error:`You are not allowed to access resource: ${s}`};if(Array.isArray(o))n=o.every(u=>i.includes(u));else if(typeof o=="object"){const u=o;u.connector==="OR"?n=u.actions.some(c=>i.includes(c)):n=u.actions.every(c=>i.includes(c))}else throw new se("Invalid access control request");if(n&&r==="OR")return{success:n};if(!n&&r==="AND")return{success:!1,error:`unauthorized to access resource "${s}"`}}return n?{success:n}:{success:!1,error:"Not authorized"}},statements:e}}function We(e){return{newRole(t){return Be(t)},statements:e}}const Ve={organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]},H=We(Ve),oe=H.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"]}),ie=H.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]}),ae=H.newRole({organization:[],member:[],invitation:[],team:[]}),He={admin:oe,owner:ie,member:ae},Je=e=>{if(!e.permissions&&!e.permission)return!1;const t=e.role.split(","),r=e.options.roles||He;for(const n of t)if(r[n]?.authorize(e.permissions??e.permission)?.success)return!0;return!1},Ge=e=>{const t=I(!1),r=I(!1),n=I(!1),s={admin:oe,member:ae,owner:ie,...e?.roles};return{id:"organization",$InferServerPlugin:{},getActions:o=>({$Infer:{ActiveOrganization:{},Organization:{},Invitation:{},Member:{},Team:{}},organization:{checkRolePermission:i=>Je({role:i.role,options:{ac:e?.ac,roles:s},permissions:i.permissions??i.permission})}}),getAtoms:o=>{const i=F(t,"/organization/list",o,{method:"GET"}),u=F([r],"/organization/get-full-organization",o,()=>({method:"GET"})),c=F([n],"/organization/get-active-member",o,{method:"GET"});return{$listOrg:t,$activeOrgSignal:r,$activeMemberSignal:n,activeOrganization:u,listOrganizations:i,activeMember:c}},pathMethods:{"/organization/get-full-organization":"GET"},atomListeners:[{matcher(o){return o==="/organization/create"||o==="/organization/delete"||o==="/organization/update"},signal:"$listOrg"},{matcher(o){return o.startsWith("/organization")},signal:"$activeOrgSignal"},{matcher(o){return o.startsWith("/organization/set-active")},signal:"$sessionSignal"},{matcher(o){return o.includes("/organization/update-member-role")},signal:"$activeMemberSignal"}]}},Qe=e=>({id:"additional-fields-client",$InferServerPlugin:{}}),Xe=()=>({id:"email-otp",$InferServerPlugin:{}});function Ye(e){try{return new URL(e).pathname!=="/"}catch{throw new se(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}function W(e,t="/api/auth"){return Ye(e)?e:(t=t.startsWith("/")?t:`/${t}`,`${e.replace(/\/+$/,"")}${t}`)}function Ze(e,t,r){if(e)return W(e,t);const n=S.BETTER_AUTH_URL||S.NEXT_PUBLIC_BETTER_AUTH_URL||S.PUBLIC_BETTER_AUTH_URL||S.NUXT_PUBLIC_BETTER_AUTH_URL||S.NUXT_PUBLIC_AUTH_URL||(S.BASE_URL!=="/"?S.BASE_URL:void 0);if(n)return W(n,t);if(typeof window<"u"&&window.location)return W(window.location.origin,t)}const Ke={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},et=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,ee={true:!0,false:!1,null:null,undefined:void 0,nan:Number.NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},tt=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function rt(e){return e instanceof Date&&!isNaN(e.getTime())}function nt(e){const t=tt.exec(e);if(!t)return null;const[,r,n,s,o,i,u,c,a,l,f]=t;let h=new Date(Date.UTC(parseInt(r,10),parseInt(n,10)-1,parseInt(s,10),parseInt(o,10),parseInt(i,10),parseInt(u,10),c?parseInt(c.padEnd(3,"0"),10):0));if(a){const d=(parseInt(l,10)*60+parseInt(f,10))*(a==="+"?-1:1);h.setUTCMinutes(h.getUTCMinutes()+d)}return rt(h)?h:null}function st(e,t={}){const{strict:r=!1,warnings:n=!1,reviver:s,parseDates:o=!0}=t;if(typeof e!="string")return e;const i=e.trim();if(i[0]==='"'&&i.endsWith('"')&&!i.slice(1,-1).includes('"'))return i.slice(1,-1);const u=i.toLowerCase();if(u.length<=9&&u in ee)return ee[u];if(!et.test(i)){if(r)throw new SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(Ke).some(([a,l])=>{const f=l.test(i);return f&&n&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${a} pattern`),f})&&r)throw new Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(i,(l,f)=>{if(l==="__proto__"||l==="constructor"&&f&&typeof f=="object"&&"prototype"in f){n&&console.warn(`[better-json] Dropping "${l}" key to prevent prototype pollution`);return}if(o&&typeof f=="string"){const h=nt(f);if(h)return h}return s?s(l,f):f})}catch(a){if(r)throw a;return e}}function ot(e,t={strict:!0}){return st(e,t)}const it={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&typeof window<"u"&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}};function at(e){const t=I(!1);return{session:F(t,"/get-session",e,{method:"GET"}),$sessionSignal:t}}const ct=e=>{const t="credentials"in Request.prototype,r=Ze(e?.baseURL,e?.basePath),n=e?.plugins?.flatMap(d=>d.fetchPlugins).filter(d=>d!==void 0)||[],s=qe({baseURL:r,...t?{credentials:"include"}:{},method:"GET",jsonParser(d){return d?ot(d,{strict:!1}):null},customFetchImpl:async(d,_)=>{try{return await fetch(d,_)}catch{return Response.error()}},...e?.fetchOptions,plugins:e?.disableDefaultFetchPlugins?[...e?.fetchOptions?.plugins||[],...n]:[it,...e?.fetchOptions?.plugins||[],...n]}),{$sessionSignal:o,session:i}=at(s),u=e?.plugins||[];let c={},a={$sessionSignal:o,session:i},l={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"};const f=[{signal:"$sessionSignal",matcher(d){return d==="/sign-out"||d==="/update-user"||d.startsWith("/sign-in")||d.startsWith("/sign-up")||d==="/delete-user"||d==="/verify-email"}}];for(const d of u)d.getAtoms&&Object.assign(a,d.getAtoms?.(s)),d.pathMethods&&Object.assign(l,d.pathMethods),d.atomListeners&&f.push(...d.atomListeners);const h={notify:d=>{a[d].set(!a[d].get())},listen:(d,_)=>{a[d].subscribe(_)},atoms:a};for(const d of u)d.getActions&&Object.assign(c,d.getActions?.(s,h));return{pluginsActions:c,pluginsAtoms:a,pluginPathMethods:l,atomListeners:f,$fetch:s,$store:h}};function ut(e,t,r){const n=t[e],{fetchOptions:s,query:o,...i}=r||{};return n||(s?.method?s.method:i&&Object.keys(i).length>0?"POST":"GET")}function lt(e,t,r,n,s){function o(i=[]){return new Proxy(function(){},{get(u,c){const a=[...i,c];let l=e;for(const f of a)if(l&&typeof l=="object"&&f in l)l=l[f];else{l=void 0;break}return typeof l=="function"?l:o(a)},apply:async(u,c,a)=>{const l="/"+i.map(A=>A.replace(/[A-Z]/g,E=>`-${E.toLowerCase()}`)).join("/"),f=a[0]||{},h=a[1]||{},{query:d,fetchOptions:_,...L}=f,P={...h,..._},N=ut(l,r,f);return await t(l,{...P,body:N==="GET"?void 0:{...L,...P?.body||{}},query:d||P?.query,method:N,async onSuccess(A){await P?.onSuccess?.(A);const E=s?.find(p=>p.matcher(l));if(!E)return;const g=n[E.signal];if(!g)return;const D=g.get();setTimeout(()=>{g.set(!D)},10)}})}})}return o()}function ft(e,t={}){let r=B.useRef(e.get());const{keys:n,deps:s=[e,n]}=t;let o=B.useCallback(u=>{const c=a=>{r.current!==a&&(r.current=a,u())};return c(e.value),n?.length?ge(e,n,c):e.listen(c)},s),i=()=>r.current;return B.useSyncExternalStore(o,i,i)}function dt(e){return`use${ht(e)}`}function ht(e){return e.charAt(0).toUpperCase()+e.slice(1)}function pt(e){const{pluginPathMethods:t,pluginsActions:r,pluginsAtoms:n,$fetch:s,$store:o,atomListeners:i}=ct(e);let u={};for(const[l,f]of Object.entries(n))u[dt(l)]=()=>ft(f);const c={...r,...u,$fetch:s,$store:o};return lt(c,s,t,n,i)}const q=pt({plugins:[Qe(),Ge(),Xe()]}),yt=async(e,t,r)=>{const n=t?.callbackURL||window.location.origin;switch(e){case"otp":return await q.emailOtp.sendVerificationOtp({email:t.email,type:"sign-in"}).then(s=>{if(s.data?.success===!1)throw new Error("Failed to send login OTP");return!0}).catch(s=>{throw s});case"signin-otp":return await q.signIn.emailOtp({email:t?.email,otp:t?.otp}).then(s=>{if(!s.data?.user)throw new Error("Failed to signin");return r&&r(n)}).catch(s=>{throw s});case"google":return await q.signIn.social({provider:"google",callbackURL:n}).then(s=>!0).catch(s=>{throw s});case"microsoft":return await q.signIn.social({provider:"microsoft",callbackURL:n}).then(s=>!0).catch(s=>{throw s});default:throw new Error("Invalid signin action")}};export{q as a,yt as s};
